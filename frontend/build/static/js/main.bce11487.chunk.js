(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{115:function(e,t,s){"use strict";s.r(t);var a,c=s(2),n=s(52),r=s.n(n),o=s(3),i=s(4),l=s(6),j=s(5),m=s(119),u=s(121),d=s(118),h=s(36),b=s.n(h),p=(s(65),s(20)),O=s(22),f=s(117),v=s(120),x=s(60),g=s(1),N=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"activeUsers",children:[Object(g.jsx)("h2",{className:"headline",children:"Active users"}),Object(g.jsx)("div",{id:"users",children:Object(g.jsx)("ul",{children:this.props.users.map((function(e,t){return Object(g.jsxs)("li",{children:[Object(g.jsx)("i",{className:"fas fa-circle"}),Object(g.jsx)("span",{children:e})]},t)}))})})]})}}]),s}(c.Component),y=N,k=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"messages",children:Object(g.jsx)("div",{id:"list",children:Object(g.jsx)("ul",{children:this.props.messages.filter((function(t){return t.room===e.props.room})).map((function(e,t){return Object(g.jsxs)("li",{children:[e.url&&Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"msg",children:[Object(g.jsx)("h4",{children:e.from}),Object(g.jsx)("div",{className:"body",children:Object(g.jsx)("a",{href:e.url,rel:"noopener noreferrer",target:"_blank",children:"My current location"})})]}),Object(g.jsx)("span",{className:"createdDate",children:e.createdDate})]}),!e.url&&Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"msg",children:[Object(g.jsx)("h4",{children:e.from}),Object(g.jsx)("div",{className:"body",children:Object(g.jsx)("p",{children:e.text})})]}),Object(g.jsx)("span",{className:"createdDate",children:e.createdDate})]})]},t)}))})})})}}]),s}(c.Component),_=k,w=s(38),S=s.n(w),C=s(56),M=s.n(C),D=s(40),F=s(41),L={users:[],messages:[],newMsg:"",fetchingLocation:!1},U=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state=Object(O.a)({},L),a}return Object(i.a)(s,[{key:"componentWillUnmount",value:function(){var e={room:this.props.match.params.room};a.emit("leave",e),this.setState(Object(O.a)({},L))}},{key:"componentDidMount",value:function(){var e=this,t=this,s={name:this.props.match.params.name,room:this.props.match.params.room};(a=Object(x.a)("/")).emit("join",s,(function(e){e&&this.props.history.push("/")})),a.on("updateUserList",(function(e){t.setState({users:e})})),a.on("newMessage",(function(s){var a=S()(s.createdDate).format("h:mm a"),c={text:s.text,from:s.from,room:s.room,createdDate:a},n=t.state.messages;n.push(c),t.setState({messages:n});var r=t.state.messages.filter((function(t){return t.room===e.props.match.params.room}));r.length>3&&t.scrollToBottom()})),a.on("createLocationMsg",(function(e){var s=S()(e.createdDate).format("h:mm a"),a={url:e.url,from:e.from,room:e.room,createdDate:s},c=t.state.messages;c.push(a),t.setState({messages:c,fetchingLocation:!1})})),a.on("disconnect",(function(){console.log("Connection lost from server.")}))}},{key:"scrollToBottom",value:function(){var e=document.querySelector(".messages #list ul"),t=document.querySelector(".messages #list"),s=document.querySelector(".messages #list ul li:last-child"),a=e.clientHeight,c=t.clientHeight,n=t.scrollTop,r=t.scrollHeight;c+n+s.offsetHeight+s.previousSibling.offsetHeight>=r&&document.querySelector("#list").scrollTo(0,a)}},{key:"clearForm",value:function(){this.setState({newMsg:""})}},{key:"inputUpdate",value:function(e){var t=e.target.name,s=e.target.value;this.setState(Object(p.a)({},t,s))}},{key:"newMessage",value:function(e){e.preventDefault();var t={text:this.state.newMsg};a.emit("createMessage",t,(function(e){})),this.clearForm()}},{key:"sendLocation",value:function(){if(this.setState({fetchingLocation:!0}),!navigator.geolocation)return alert("GeoLocation not supported by your browser");navigator.geolocation.getCurrentPosition((function(e){a.emit("createLocationMsg",{lat:e.coords.latitude,lon:e.coords.longitude})}),(function(){alert("Unable to fetch location")}))}},{key:"render",value:function(){var e=this,t=this.state.newMsg;return Object(g.jsxs)("div",{className:"chatPage",children:[Object(g.jsx)(M.a,{loading:this.state.fetchingLocation,bgColor:"#F5F7F4",spinnerColor:"#3597DE",textColor:"#010000",text:"Fetching your current location",children:Object(g.jsx)("div",{className:"hide"})}),Object(g.jsx)(y,{users:this.state.users}),Object(g.jsxs)("div",{className:"messages_wrap",children:[Object(g.jsxs)("h1",{children:[Object(g.jsx)(f.a,{to:"/",children:Object(g.jsx)("i",{className:"fas fa-chevron-circle-left"})}),this.props.match.params.room]}),Object(g.jsx)(_,{messages:this.state.messages,room:this.props.match.params.room}),Object(g.jsx)("div",{className:"newMsgForm",children:Object(g.jsx)("div",{className:"wrap",children:Object(g.jsxs)("form",{onSubmit:function(t){return e.newMessage(t)},children:[Object(g.jsx)("div",{className:"form_wrap",children:Object(g.jsx)("div",{className:"form_row",children:Object(g.jsx)("div",{className:"form_item",children:Object(g.jsxs)("div",{className:"form_input",children:[Object(g.jsx)("input",{name:"newMsg",placeholder:"Type your message...",autoComplete:"off",value:t,onChange:this.inputUpdate.bind(this)}),Object(g.jsx)("span",{className:"bottom_border"})]})})})}),Object(g.jsxs)("div",{className:"btnWrap",children:[Object(g.jsx)("button",{type:"submit",className:"btn",children:Object(g.jsx)(D.a,{icon:F.b})}),Object(g.jsx)("button",{id:"send_location",className:"btn",onClick:function(){return e.sendLocation()},children:Object(g.jsx)(D.a,{icon:F.a})})]})]})})})]})]})}}]),s}(c.Component),J=Object(v.a)(U),H={name:"",room:""},T=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state=Object(O.a)({},H),e}return Object(i.a)(s,[{key:"clearForm",value:function(){this.setState(Object(O.a)({},H))}},{key:"inputUpdate",value:function(e){var t=e.target.name,s=e.target.value;this.setState(Object(p.a)({},t,s))}},{key:"join",value:function(){var e=this.state,t=e.name,s=e.room;t&&s&&this.props.history.push("/chat/".concat(t,"/").concat(s))}},{key:"render",value:function(){var e=this,t=this.state.name;return Object(g.jsx)("div",{className:"joinForm",children:Object(g.jsxs)("div",{className:"form_wrap",children:[Object(g.jsx)("div",{className:"form_row",children:Object(g.jsx)("div",{className:"form_item",children:Object(g.jsxs)("div",{className:"form_input",children:[Object(g.jsx)("input",{type:"text",placeholder:"Full Name",autoComplete:"off",name:"name",value:t,onChange:this.inputUpdate.bind(this)}),Object(g.jsx)("span",{className:"bottom_border"})]})})}),Object(g.jsx)("div",{className:"form_row",children:Object(g.jsx)("div",{className:"form_item",children:Object(g.jsxs)("div",{className:"form_select",children:[Object(g.jsxs)("select",{name:"room",onChange:this.inputUpdate.bind(this),children:[Object(g.jsx)("option",{value:"",children:"Please select a group"}),Object(g.jsx)("option",{value:"React JS",children:"React JS"}),Object(g.jsx)("option",{value:"Node JS",children:"Node JS"})]}),Object(g.jsx)("i",{className:"fas fa-chevron-down"})]})})}),Object(g.jsx)("div",{className:"form_buttons",children:Object(g.jsx)("button",{onClick:function(){return e.join()},className:"btn",children:"Join"})})]})})}}]),s}(c.Component),q=Object(v.a)(T),B=function(e){Object(l.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={site_loaded:!1},a}return Object(i.a)(s,[{key:"componentDidMount",value:function(){this.setState({site_loaded:!0})}},{key:"render",value:function(){return Object(g.jsx)("div",{className:b()({App:!0,site_loaded:this.state.site_loaded}),children:Object(g.jsx)(m.a,{children:Object(g.jsxs)(u.a,{children:[Object(g.jsx)(d.a,{path:"/chat/:name/:room",component:J}),Object(g.jsx)(d.a,{path:"/",component:q})]})})})}}]),s}(c.Component);r.a.render(Object(g.jsx)(B,{}),document.getElementById("root"))},65:function(e,t,s){}},[[115,1,2]]]);
//# sourceMappingURL=main.bce11487.chunk.js.map